(this["webpackJsonpxstate-ts"]=this["webpackJsonpxstate-ts"]||[]).push([[0],{31:function(e,n,t){e.exports=t(50)},36:function(e,n,t){},37:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t.n(a),o=t(27),c=t.n(o),i=(t(36),t(37),t(30)),l=t(11),s=t(2),u={actions:{recordingEffect:function(e,n){e.mediaRecorder.start()}},services:{mutateMyAnswers:function(){return new Promise((function(e,n){return setTimeout((function(){return e()}),1e3)}))}},guards:{},activities:{},delays:{}},d={id:"recorderMachine",on:{CLOSE:{actions:Object(s.r)("CLOSE")}},initial:"idle",context:{content:"",canRecord:!1,mediaRecorder:null,blob:null,audioURL:""},states:{idle:{invoke:{src:function(){return new Promise((function(e,n){return navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){return e(n)})).catch((function(e){return n(e)}))}))},onDone:{actions:Object(s.b)((function(e,n){return{canRecord:!0,mediaRecorder:new MediaRecorder(n.data)}}))},onError:{actions:Object(s.b)((function(e,n){return{canRecord:!1}}))}},on:{RECORD:{target:"recording",cond:function(e,n){return e.canRecord}}}},stopped:{invoke:{src:function(e,n){return new Promise((function(n,t){e.mediaRecorder.stop(),e.mediaRecorder.ondataavailable=function(e){var t=[];t.push(e.data),n({blob:new Blob(t,{type:"audio/ogg; codecs=opus"}),audioURL:window.URL.createObjectURL(e.data)})}}))},onDone:{target:"recorded",actions:Object(s.b)((function(e,n){var t=n.data;return{blob:t.blob,audioURL:t.audioURL}}))}}},recorded:{initial:"paused",states:{playing:{on:{PAUSE:"paused"}},paused:{on:{PLAY:"playing"}}},on:{SEND:{target:"sending"},TRASH:{target:"idle",actions:function(e,n){return e.content=""}}}},recording:{onEntry:["recordingEffect"],on:{STOP:{target:"stopped"}}},sending:{invoke:{src:"mutateMyAnswers",onDone:{target:"idle"},onError:{target:"recorded"}}}}},m=Object(i.a)({},u);var E=function(){var e=Object(l.useMachine)(d,m,{content:"",canRecord:!1,mediaRecorder:new MediaRecorder(new MediaStream),blob:null,audioURL:""}),n=e.send,t=e.state,a=t.matches,o=t.value,c=e.context;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,(a("recording")||a("recorded"))&&r.a.createElement("div",null,c.content),r.a.createElement("header",null,a("idle")&&r.a.createElement("button",{disabled:!c.canRecord,onClick:function(){n("RECORD")}},"\ud83d\udd34"),a("recording")&&r.a.createElement("button",{onClick:function(){return n("STOP")}},"stop"),a("recorded")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("audio",{controls:!0,src:c.audioURL}),r.a.createElement("button",{onClick:function(){return n("SEND")}},"send"),r.a.createElement("button",{onClick:function(){return n("TRASH")}},"trash"))),a("sending")&&r.a.createElement("div",null,"sending...")),r.a.createElement("pre",{className:"context"},JSON.stringify(c,null,2)),r.a.createElement("pre",{className:"machineValue"},JSON.stringify(o,null,2)))},g=t(29),f=t(10),b=function(){return new Promise((function(e,n){return setTimeout((function(){n()}),2e3)}))},R=function(){var e=Object(a.useState)(""),n=Object(g.a)(e,2),t=n[0],o=n[1],c=Object(l.useMachine)(v,{services:{mutateMyAnswers:b}},{content:""}),i=c.send,s=c.state,u=s.value,d=s.matches,m=c.context;return Object(a.useEffect)((function(){d("success")?console.log("success"):d("failure")&&console.log("failure",m)}),[u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:t,onChange:function(e){(d("idle")||d("failure"))&&(console.log(u),i("TYPED")),o(e.target.value)}}),(d("typed")||d("failure"))&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){console.log("sent"),i({type:"SEND",payload:t})}},"send"),r.a.createElement("button",{onClick:function(){o(""),i("TRASH")}},"trash")),d("failure")&&r.a.createElement("span",null,"error. pls retry"))},v={id:"abcerMachine",initial:"idle",on:{CLOSE:{actions:Object(f.sendParent)("CLOSE")}},states:{idle:{on:{TYPED:"typed"}},typed:{on:{SEND:{target:"loading",actions:Object(f.assign)((function(e,n){return{content:n.payload}}))},TRASH:{target:"idle",actions:Object(f.assign)((function(e,n){return{content:""}}))}}},loading:{invoke:{src:"mutateMyAnswers",onDone:{target:"success"},onError:{target:"failure"}}},success:{},failure:{on:{SEND:"loading",TRASH:{target:"idle",actions:Object(f.assign)((function(e,n){return{content:""}}))},TYPED:"typed"}}}},p=t(17),O={id:"studentMachine",initial:"idle",states:{idle:{on:{ABC:"abcing",RECORD:"recording"}},recording:{invoke:{src:Object(p.a)(d)},on:{CLOSE:"idle"}},abcing:{invoke:{src:Object(p.a)(v)},on:{CLOSE:"idle"}}}};var h=function(){var e=Object(l.useMachine)(O,{},{content:""}),n=e.state.matches,t=e.send;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"topSide"},r.a.createElement("div",{className:"board"},r.a.createElement("img",{alt:"board"})),r.a.createElement("div",{className:"launcher"},n("idle")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return t("ABC")}},"ABC"),r.a.createElement("button",{onClick:function(){return t("RECORD")}},"RECORD")))),!n("idle")&&r.a.createElement("div",{className:"controlBoard"},r.a.createElement("button",{className:"close-btn",onClick:function(){return t("CLOSE")}},"X"),n("abcing")&&r.a.createElement(R,null),n("recording")&&r.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.d11c5c01.chunk.js.map